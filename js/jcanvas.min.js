/**
 * @license jCanvas v13.06.17
 * Copyright 2013 Caleb Evans
 * Released under the MIT license
 */(function(e,t,n,r,i,s,o,u,a){function xn(e){var t=this;un(t,e);return t}function Tn(e){e?un(xn.prototype,e):Tn.prefs=xn.prototype=un({},on);return this}function Nn(e){return fn(e)==="string"}function Cn(e){return e&&e[L]?e[L]("2d"):u}function kn(e,t){e.save();t[O].push(un({},t[d]))}function Ln(e,t){e[at]();t[O][f]===0?t[d]=un({},wn):t[d]=un({},t[O].pop())}function An(e,t,n){fn(n[g])===jt?t[g]=n[g][T](e,n):t[g]=n[g];fn(n[x])===jt?t[x]=n[x][T](e,n):t[x]=n[x];t.lineWidth=n[ct];if(n.rounded){t.lineCap=Bt;t.lineJoin=Bt}else{t.lineCap=n.strokeCap;t.lineJoin=n.strokeJoin;t.miterLimit=n.miterLimit}t.shadowOffsetX=n.shadowX;t.shadowOffsetY=n.shadowY;t[mt]=n[mt];t[v]=n[v];t.globalAlpha=n.opacity;t.globalCompositeOperation=n.compositing;n[Ht]&&(t.webkitImageSmoothingEnabled=t.mozImageSmoothingEnabled=n[Ht])}function On(e,t,n){if(n.mask){n[ht]&&kn(e,t);e.clip();t[d].masks.push(n._args)}}function Mn(e,t){t._transformed&&e[at]()}function _n(e,t,n){var r;n[yt]&&t[z]();if(n.shadowStroke&&n[ct]!==0){t.stroke();t.fill();t[v]=p;t[mt]=0;t.stroke()}else{t.fill();n[g]!==p&&(t[v]=p);n[ct]!==0&&t.stroke()}n[yt]||t[z]();Mn(t,n);if(n.mask||n[l]){r=jn(e);On(t,r,n)}}function Dn(e,t,n){t[K]=t[Nt]?hn/180:1;e[E](t.x,t.y);e[ut](t[ut]*t[K]);e[E](-t.x,-t.y);n[ut]+=t[ut]*t[K]}function Pn(e,t,n){t.scale!==1&&(t[st]=t[ot]=t.scale);e[E](t.x,t.y);e.scale(t[st],t[ot]);e[E](-t.x,-t.y);n[st]*=t[st];n[ot]*=t[ot]}function Hn(e,t,n){t[E]&&(t[j]=t[F]=t[E]);e[E](t[j],t[F]);n[j]+=t[j];n[F]+=t[F]}function Bn(e,t,n,r){t[K]=t[Nt]?hn/180:1;t._transformed=s;e.save();r===a&&(r=n);if(!t.fromCenter&&!t._centered){t.x+=n/2;t.y+=r/2;t._centered=s}t[ut]&&Dn(e,t,{});(t.scale!==1||t[st]!==1||t[ot]!==1)&&Pn(e,t,{});(t[E]||t[j]||t[F])&&Hn(e,t,{})}function jn(t){var n;if(bn._canvas===t&&bn._data)n=bn._data;else{n=e.data(t,rt);if(!n){n={canvas:t,layers:[],layer:{names:{},groups:{}},intersecting:[],drag:{},event:{type:u,x:u,y:u},events:{},transforms:un({},wn),savedTransforms:[],animating:o,animated:u,pixelRatio:1,scaled:!1};e.data(t,rt,n)}bn._canvas=t;bn._data=n}return n}function Fn(e,t,n){var r;for(r in Tn[P])Tn[P][_t](r)&&In(e,t,n,r)}function In(e,t,n,r){if(n[r]){r=Gn(r);Tn[P][r](e,t);n[A]=s}}function qn(e,t,n){var r,i,o;if(n[bt]||n[R]||n[St]){r=[X,D,Y];for(o=0;o<r[f];o+=1){i=Gn(r[o]);Tn[P][i](e,t)}if(!t[P].mouseoutdrag){e.bind("mouseout.jCanvas",function(){var n=t.drag[l];if(n){t.drag={};e[B]();n.dragcancel&&n.dragcancel[T](e[0],n)}});t[P].mouseoutdrag=s}n[A]=s}}function Rn(e,t,n,r){var i=t[l].names;r?r[nt]!==a&&Nn(n[nt])&&n[q]!==r[q]&&delete i[n[nt]]:r=n;Nn(r[nt])&&(i[r[nt]]=n)}function Un(e,t,n,r){var i=t[l][gt],s,o,u;if(!r)r=n;else if(r[q]!==a&&Nn(n[q])&&n[q]!==r[q]){s=i[n[q]];if(s){for(u=0;u<s[f];u+=1)if(s[u]===n){o=u;s[m](u,1);break}s[f]===0&&delete i[n[q]]}}if(Nn(r[q])){s=i[r[q]];if(!s){s=i[r[q]]=[];s[nt]=r[q]}o===a&&(o=s[f]);s[m](o,0,n)}}function zn(e,t,n,r){if(n&&n[C]&&n[H]){r?n._next=r:n._next=u;n[H][T](e,n)}}function Wn(t,n,r,i){var o,u,c=r,h;n._args=r;n.canvas=t;if(n[bt]){n[l]=s;n[bt]=s}i?n[H]=i:n.method?n[H]=e.fn[n.method]:n.type?n[H]=e.fn[yn[n.type]]:n[H]=function(){};if(n[l]&&!n._layer){o=e(t);u=o[w]();h=jn(t);c=new xn(n);Rn(o,h,c);Un(o,h,c);Fn(o,h,c);qn(o,h,c);c[l]=s;c._layer=s;c[M]===a&&(c[M]=u[f]);u[m](c[M],0,c)}return c}function Xn(e){var t;for(t=0;t<En[f];t+=1)e[En[t]]=e["_"+En[t]]}function Vn(e,t){var n;for(n=0;n<En[f];n+=1){e["_"+En[n]]=e[En[n]];Sn[En[n]]=1;t&&delete e[En[n]]}}function $n(e,t,n){var r;for(r in n)n[_t](r)&&ln(n[r])&&(n[r]=n[r][T](e,t,r));return n}function Jn(n){var r,s,o=[],u=1;if(n[Rt](/^#?\w+$/i)){n===p&&(n="rgba(0,0,0,0)");s=t.head;r=s[dt][zt];s[dt][zt]=n;n=e.css(s,zt);s[dt][zt]=r}if(n[Rt](/^rgb/i)){o=n[Rt](/\d+/gi);n[Rt](/%/gi)&&(u=2.55);o[0]*=u;o[1]*=u;o[2]*=u;o[3]!==a?o[3]=i(o[3]):o[3]=1}return o}function Kn(e){var t=3,n;if(fn(e[Ft])!=="array"){e[Ft]=Jn(e[Ft]);e.end=Jn(e.end)}e.now=[];if(e[Ft][3]!==1||e.end[3]!==1)t=4;for(n=0;n<t;n+=1){e.now[n]=e[Ft][n]+(e.end[n]-e[Ft][n])*e.pos;n<3&&(e.now[n]=cn(e.now[n]))}if(e[Ft][3]!==1||e.end[3]!==1)e.now="rgba("+e.now.join(",")+")";else{e.now.slice(0,3);e.now="rgb("+e.now.join(",")+")"}e.elem.nodeName?e.elem[dt][e.prop]=e.now:e.elem[e.prop]=e.now}function Qn(t){var n;for(n=0;n<t[f];n+=1)e.fx.step[t[n]]=Kn}function Gn(e){"ontouchstart"in window&&mn[e]&&(e=mn[e]);return e}function Yn(e){gn[e]&&(e=gn[e]);return e}function Zn(e){Tn[P][e]=function(t,n){e=Gn(e);var r=e===U||e===J?D:e,i=n[Q];if(!n[P][r]){t.bind(r+".jCanvas",function(e){i.x=e[Vt];i.y=e.offsetY;i.type=r;i[Q]=e;t[B]({resetFire:s});e.preventDefault()});n[P][r]=s}}}function er(e,t,n){var r,i,o,a,f,l,c,h;r=n._args;if(r[A]){i=jn(e);o=i[Q];if(o.x!==u&&o.y!==u){l=o.x*i[Ut];c=o.y*i[Ut];a=t.isPointInPath(l,c)||t[Jt]&&t[Jt](l,c)}f=i[d];r.eventX=r.mouseX=o.x;r.eventY=r.mouseY=o.y;r[Q]=o[Q];h=i[d][ut];l=r.eventX;c=r.eventY;if(h!==0){r[tt]=l*dn(-h)-c*pn(-h);r[et]=c*dn(-h)+l*pn(-h)}else{r[tt]=l;r[et]=c}r[tt]/=f[st];r[et]/=f[ot];!a&&r[kt]&&!r[Et]&&(r[Pt]=s);a&&i[$].push(r);r.intersects=a}}function tr(e,t){if(t.font)e.font=t.font;else{isNaN(Number(t[b]))||(t[b]+="px");e.font=t[$t]+" "+t[b]+" "+t[qt]}}function nr(t,n,r,s){var o,u,a=/\b(\d*\.?\d*)\w\w\b/gi,l,p;if(bn.text===r.text&&bn.font===r.font&&bn[$t]===r[$t]&&bn[b]===r[b]&&bn[qt]===r[qt]&&bn[At]===r[At]&&bn[Z]===r[Z]){r[h]=bn[h];r[c]=bn[c]}else{r[h]=n[I](s[0])[h];for(l=1;l<s[f];l+=1){p=n[I](s[l])[h];p>r[h]&&(r[h]=p)}o=t[dt][b];if(r.font){u=r.font[Rt](a);u&&(t[dt][b]=r.font[Rt](a)[0])}else t[dt][b]=r[b];r[c]=i(e.css(t,b))*s[f]*r[Z];t[dt][b]=o}}function rr(e,t){var n=t.text,r=t[At],i=n.split(" "),s,o=[],u="";if(e[I](n)[h]<r||i[f]===1)o=[n];else{for(s=0;s<i[f];s+=1){if(e[I](u+i[s])[h]>r){u!==""&&o.push(u);u=""}u+=i[s];s!==i[f]-1&&(u+=" ")}o.push(u)}o=o.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n");return o}var f="length",l="layer",c="height",h="width",p="transparent",d="transforms",v="shadowColor",m="splice",g="fillStyle",y="beginPath",b="fontSize",w="getLayers",E="translate",S="getLayerGroup",x="strokeStyle",T="call",N="prevMasksIntersects",C="visible",k="getLayer",L="getContext",A="_event",O="savedTransforms",M="index",_="sHeight",D="mousemove",P="events",H="_method",B="drawLayers",j="translateX",F="translateY",I="measureText",q="group",R="dragGroupWithLayer",U="mouseover",z="closePath",W="sWidth",X="mousedown",V="drawImage",$="intersecting",J="mouseout",K="_toRad",Q="event",G="animating",Y="mouseup",Z="lineHeight",et="_eventY",tt="_eventX",nt="name",rt="jCanvas",it="touchstart",st="scaleX",ot="scaleY",ut="rotate",at="restore",ft="touchmove",lt="lineTo",ct="strokeWidth",ht="autosave",pt="bezierCurveTo",dt="style",vt="touchend",mt="shadowBlur",gt="groups",yt="closed",bt="draggable",wt="concavity",Et="_fired",St="cursor",xt="_startY",Tt="_startX",Nt="inDegrees",Ct="object",kt="_hovered",Lt="radius",At="maxWidth",Ot="animated",Mt="dragging",_t="hasOwnProperty",Dt="drawArc",Pt="_mousedout",Ht="imageSmoothing",Bt="round",jt="function",Ft="start",It="_animating",qt="fontFamily",Rt="match",Ut="pixelRatio",zt="color",Wt="drawQuadratic",Xt="<canvas />",Vt="offsetX",$t="fontStyle",Jt="isPointInStroke",Kt="moveTo",Qt="load",Gt="drawPolygon",Yt="drawEllipse",Zt="complete",en="restoreCanvas",tn="setLayer",nn="drawVector",rn="createPattern",sn="drawBezier",on,un=e.extend,an=e.inArray,fn=e.type,ln=e.isFunction,cn=r[Bt],hn=r.PI,pn=r.sin,dn=r.cos,vn=e[Q].fix,mn,gn,yn,bn={},wn={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[{intersects:s}]},En,Sn;e.fn[rt]=Tn;Tn[P]={};on={align:"center",autosave:s,baseline:"middle",bringToFront:o,ccw:o,closed:o,compositing:"source-over",concavity:0,cornerRadius:0,cropFromCenter:s,disableDrag:o,disableEvents:o,domain:u,draggable:o,group:u,data:{},each:u,end:360,fillStyle:p,font:"",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:s,fn:u,graph:"y",height:u,imageSmoothing:s,inDegrees:s,lineHeight:1,layer:o,load:u,mask:o,maxWidth:u,miterLimit:10,name:u,opacity:1,projection:0,r1:u,r2:u,radius:0,range:u,repeat:"repeat",respectAlign:o,rotate:0,rounded:o,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:p,shadowStroke:!1,shadowX:0,shadowY:0,sHeight:u,sides:0,source:"",start:0,strokeCap:"butt",strokeJoin:"miter",strokeStyle:p,strokeWidth:1,sWidth:u,sx:u,sy:u,text:"",translate:0,translateX:0,translateY:0,type:u,visible:s,width:u,x:0,y:0};Tn();Tn.extend=function(n){Tn.defaults=un(on,n.props);Tn();n[nt]&&(e.fn[n[nt]]=function r(e){var t=this,i,s,o,u=new xn(e);for(s=0;s<t[f];s+=1){i=t[s];o=Cn(i);if(o){e=Wn(i,u,e,r);An(i,o,u);n.fn[T](i,o,u)}}return t});return e.fn[n[nt]]};e.fn[w]=function(t){var n=this[0],r,i,s=[];if(n&&n[L]){r=jn(n).layers;if(ln(t))for(i=0;i<r[f];i+=1)t[T](n,r[i])&&s.push(r[i]);else s=r}return s};e.fn[k]=function(n){var r=this[w](),i=e.type(n),s=jn(this[0]),o,u;if(n&&n[l])o=n;else if(i==="number"){n<0&&(n=r[f]+n);o=r[n]}else if(i==="regexp"){for(u=0;u<r[f];u+=1)if(Nn(r[u][nt])&&r[u][nt][Rt](n)){o=r[u];break}}else{s=jn(this[0]);o=s[l].names[n]}return o};e.fn[S]=function(n){var r=e.type(n),i,s,o,u;if(r==="array")return n;if(r==="regexp"){u=jn(this[0]);i=u[gt];for(s in i)if(s[Rt](n)){o=i[s];break}}else{u=jn(this[0]);o=u[l][gt][n]}return o};e.fn.getLayerIndex=function(t){var n=this[w](),r=this[k](t);return an(r,n)};e.fn[tn]=function(n,r){var i=this,s,o,u,a;for(o=0;o<i[f];o+=1){s=e(i[o]);u=jn(i[o]);a=e(i[o])[k](n);if(a){Rn(s,u,a,r);Un(s,u,a,r);un(a,r);Fn(s,u,a);qn(s,u,a)}}return i};e.fn.setLayerGroup=function(n,r){var i=this,s,o,u,a;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[S](n);if(u)for(a=0;a<u[f];a+=1)s[tn](u[a],r)}return i};e.fn.setLayers=function(n){var r=this,i,s,o,u;for(s=0;s<r[f];s+=1){i=e(r[s]);o=e(r[s])[w]();for(u=0;u<o[f];u+=1)i[tn](o[u],n)}return r};e.fn.moveLayer=function(n,r){var i=this,s,o,u,a;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[w]();a=s[k](n);if(a){a[M]=an(a,u);u[m](a[M],1);u[m](r,0,a);r<0&&(r=u[f]+r);a[M]=r}}return i};e.fn.removeLayer=function(n){var r=this,i,s,o,a,l;for(s=0;s<r[f];s+=1){i=e(r[s]);o=jn(r[s]);a=i[w]();l=i[k](n);if(l){l[M]=an(l,a);a[m](l[M],1);Rn(i,o,l,{name:u});Un(i,o,l,{group:u})}}return r};e.fn.removeLayerGroup=function(n){var r=this,i,s,o,c,h,p,d;if(n!==a)for(s=0;s<r[f];s+=1){i=e(r[s]);o=jn(r[s]);c=i[w]();h=i[S](n);if(h){for(d=0;d<h[f];d+=1){p=h[d];p[M]=an(p,c);c[m](p[M],1);Rn(i,o,p,{name:u})}delete o[l][gt][h[nt]]}}return r};e.fn.removeLayers=function(){var n=this,r,i,s;for(i=0;i<n[f];i+=1){r=e(n[i]);s=jn(n[i]);s.layers[f]=0;s[l].names={};s[l][gt]={}}return n};e.fn.drawLayer=function ir(t){var n=this,r,i,s,o;for(r=0;r<n[f];r+=1){s=e(n[r]);i=Cn(n[r]);o=s[k](t);ir(s,i,o)}return n};e.fn[B]=function(n){var r=this,i,a,c,h=n||{},p,v,g,y,b,w,E,S,x,k,L,_;h[M]||(h[M]=0);for(a=0;a<r[f];a+=1){i=e(r[a]);c=Cn(r[a]);if(c){b=jn(r[a]);h.clear!==o&&i.clearCanvas();p=b.layers;for(g=h[M];g<p[f];g+=1){v=p[g];v[M]=g;h.resetFire&&(v[Et]=o);v[A]=!v.disableEvents;zn(i,c,v,g+1);if(v[Pt]){v[Pt]=o;v[Et]=s;v[kt]=o;v[J]&&v[J][T](r[a],v);v[St]&&v._cursor&&i.css({cursor:v._cursor})}if(v[H]===e.fn[V]&&v[C])break}v={};S=b[d].masks;for(y=b[$][f]-1;y>=0;y-=1){v=b[$][y];v[N]=s;for(x=S[f]-1;x>=0;x-=1)if(v&&S[x][M]<v[M]&&!S[x].intersects){v[N]=o;break}if(v[N])break}w=b[Q];E=w.type;v[E]||(E=Yn(E));_=v[E];k=b.drag;if(v[A]&&v[N]){if(v[U]||v[J]||v[St])if(!v[kt]&&!v[Et]){v[Et]=s;v[kt]=s;v[U]&&v[U][T](r[a],v);if(v[St]){v._cursor=i.css(St);i.css({cursor:v[St]})}}if(_&&!v[Et]){v[Et]=s;w.type=u;_[T](r[a],v)}v[bt]&&!v.disableDrag&&(E===X||E===it)&&(k[l]=v)}if(k[l]){if(E===Y||E===vt){if(k[l].dragstop&&k[Mt]){k[l].dragstop[T](i,k[l]);k[Mt]=o}b.drag={}}if(E===D||E===ft){if(!k[Mt]){k[Mt]=s;k[l].dragstart&&k[l].dragstart[T](i,k[l]);if(k[l].bringToFront){p[m](k[l][M],1);k[l][M]=p.push(k[l])}L=b[l][gt][k[l][q]];if(k[l][q]&&k[l][R]&&L)for(g=0;g<L[f];g+=1)if(L[g]!==k[l]){L[g][Tt]=L[g].x;L[g][xt]=L[g].y;L[g]._endX=k[l][tt];L[g]._endY=k[l][et];if(L[g].bringToFront){L[g][M]=an(L[g],p);p[m](L[g][M],1);p[m](-1,0,L[g]);L[g][M]=p[f]-2}}k[Tt]=k[l][Tt]=k[l].x;k[xt]=k[l][xt]=k[l].y;k._endX=k[l]._endX=k[l][tt];k._endY=k[l]._endY=k[l][et]}k[l].x=k[l][tt]-(k._endX-k[Tt]);k[l].y=k[l][et]-(k._endY-k[xt]);k[l].drag&&k[l].drag[T](i,k[l]);L=b[l][gt][k[l][q]];if(k[l][q]&&k[l][R]&&L)for(g=0;g<L[f];g+=1)if(L[g]!==k[l]){L[g].x=k[l][tt]-(L[g]._endX-L[g][Tt]);L[g].y=k[l][et]-(L[g]._endY-L[g][xt])}}}b[$][f]=0;b[d].masks[f]=0;b[d]=un({},wn);b[O][f]=0}}return r};e.fn.addLayer=function(t){var n=this,r,i,o;o=new xn(t);for(r=0;r<n[f];r+=1){i=Cn(n[r]);if(i){o[l]=s;t=Wn(n[r],o,t)}}return n};En=[h,c,"opacity",Z];Sn={};e.fn.animateLayer=function(){function g(e,t,n){return function(){Xn(n);(!t[G]||t[Ot]===n)&&e[B]();h[4]&&h[4][T](e[0],n);n[It]=o;t[G]=o;t[Ot]=u}}function y(e,t,n){return function(r,i){Xn(n);if(!n[It]&&!t[G]){n[It]=s;t[G]=s;t[Ot]=n}(!t[G]||t[Ot]===n)&&e[B]();h[5]&&h[5][T](e[0],r,i,n)}}var n=this,r,i,c,h=[].slice[T](arguments,0),p,d,v;fn(h[0])===Ct&&!h[0][l]&&h.unshift(0);if(fn(h[2])===Ct){h[m](2,0,h[2].duration||u);h[m](3,0,h[3].easing||u);h[m](4,0,h[4][Zt]||u);h[m](5,0,h[5].step||u)}else{if(h[2]===a){h[m](2,0,u);h[m](3,0,u);h[m](4,0,u)}else if(ln(h[2])){h[m](2,0,u);h[m](3,0,u)}if(h[3]===a){h[3]=u;h[m](4,0,u)}else ln(h[3])&&h[m](3,0,u)}for(i=0;i<n[f];i+=1){r=e(n[i]);c=Cn(n[i]);if(c){p=jn(n[i]);d=r[k](h[0]);if(d&&d[H]!==e.fn.draw){v=un({},h[1]);v=$n(n[i],d,v);Vn(v,s);Vn(d);d[dt]=Sn;e(d).animate(v,{duration:h[2],easing:e.easing[h[3]]?h[3]:u,complete:g(r,p,d),step:y(r,p,d)})}}}return n};e.fn.animateLayerGroup=function(n){var r=this,i,s,o=[].slice[T](arguments,0),u,a;for(s=0;s<r[f];s+=1){i=e(r[s]);u=i[S](n);for(a=0;a<u[f];a+=1)i.animateLayer.apply(i,[u[a]].concat(o.slice(1)))}return r};e.fn.delayLayer=function(n,r){var i=this,s,o;r=r||0;for(s=0;s<i[f];s+=1){o=e(i[s])[k](n);e(o).delay(r)}return i};e.fn.delayLayerGroup=function(n,r){var i=this,s,o,u,a,l;r=r||0;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[S](n);if(u)for(l=0;l<u[f];l+=1){a=u[l];a&&e(a).delay(r)}}return i};e.fn.stopLayer=function(n,r){var i=this,s,o;for(s=0;s<i[f];s+=1){o=e(i[s])[k](n);o&&e(o).stop(r)}return i};e.fn.stopLayerGroup=function(n,r){var i=this,s,o,u,a,l;for(o=0;o<i[f];o+=1){s=e(i[o]);u=s[S](n);if(u)for(l=0;l<u[f];l+=1){a=u[l];a&&e(a).stop(r)}}return i};Qn([zt,"backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor",g,"outlineColor",x,v]);mn={mousedown:it,mouseup:vt,mousemove:ft};gn={touchstart:X,touchend:Y,touchmove:D};Zn("click");Zn("dblclick");Zn(X);Zn(Y);Zn(D);Zn(U);Zn(J);Zn(it);Zn(ft);Zn(vt);e[Q].fix=function(t){var n,r,i;t=vn[T](e[Q],t);r=t.originalEvent;if(r){i=r.changedTouches;if(t.pageX!==a&&t[Vt]===a){n=e(t.target).offset();if(n){t[Vt]=t.pageX-n.left;t.offsetY=t.pageY-n.top}}else if(i){n=e(r.target).offset();if(n){t[Vt]=i[0].pageX-n.left;t.offsetY=i[0].pageY-n.top}}}return t};yn={arc:Dt,bezier:sn,circle:Dt,ellipse:Yt,"function":"draw",image:V,line:"drawLine",polygon:Gt,quadratic:Wt,rectangle:"drawRect",text:"drawText",vector:nn};e.fn.draw=function sr(t){var n=this,r,i,s,o;o=new xn(t);for(i=0;i<n[f];i+=1){r=e(n[i]);s=Cn(n[i]);if(s){t=Wn(n[i],o,t,sr);o[C]&&(o.fn?o.fn[T](n[i],s,o):o[H]!==sr&&o[H][T](r,t))}}return n};e.fn.clearCanvas=function(t){var n=this,r,i,s=new xn(t);for(r=0;r<n[f];r+=1){i=Cn(n[r]);if(i)if(!s.x||!s.y||!s[h]||!s[c]){i.save();i.setTransform(1,0,0,1,0,0);i.clearRect(0,0,n[r][h],n[r][c]);i[at]()}else{Bn(i,s,s[h],s[c]);i.clearRect(s.x-s[h]/2,s.y-s[c]/2,s[h],s[c]);i[at]()}}return n};e.fn.saveCanvas=function(){var t=this,n,r,i;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){i=jn(t[n]);kn(r,i)}}return t};e.fn[en]=function(){var t=this,n,r,i;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){i=jn(t[n]);Ln(r,i)}}return t};e.fn.restoreCanvasOnRedraw=function(n){var r={layer:s,fn:function(){e(this)[en]()}};un(r,n);return this.draw(r)};e.fn.rotateCanvas=function or(e){var t=this,n,r,i=new xn(e),s;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){s=jn(t[n]);e=Wn(t[n],i,e,or);i[ht]&&r.save();Dn(r,i,s[d])}}return t};e.fn.scaleCanvas=function ur(e){var t=this,n,r,i=new xn(e),s;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){s=jn(t[n]);e=Wn(t[n],i,e,ur);i[ht]&&r.save();Pn(r,i,s[d])}}return t};e.fn.translateCanvas=function ar(e){var t=this,n,r,i=new xn(e),s;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){s=jn(t[n]);e=Wn(t[n],i,e,ar);i[ht]&&r.save();Hn(r,i,s[d])}}return t};e.fn.drawRect=function fr(e){var t=this,n,r,i=new xn(e),u,a,l,p,d;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){e=Wn(t[n],i,e,fr);if(i[C]){An(t[n],r,i);Bn(r,i,i[h],i[c]);r[y]();u=i.x-i[h]/2;a=i.y-i[c]/2;d=i.cornerRadius;if(d){i[yt]=s;l=i.x+i[h]/2;p=i.y+i[c]/2;l-u-2*d<0&&(d=(l-u)/2);p-a-2*d<0&&(d=(p-a)/2);r[Kt](u+d,a);r[lt](l-d,a);r.arc(l-d,a+d,d,3*hn/2,hn*2,o);r[lt](l,p-d);r.arc(l-d,p-d,d,0,hn/2,o);r[lt](u+d,p);r.arc(u+d,p-d,d,hn/2,hn,o);r[lt](u,a+d);r.arc(u+d,a+d,d,hn,3*hn/2,o)}else r.rect(u,a,i[h],i[c]);i[A]&&er(t[n],r,i);_n(t[n],r,i)}}}return t};e.fn[Dt]=function lr(e){var t=this,n,r,i=new xn(e);e=e||{};i[l]&&!i[Nt]&&i.end===360&&(e.end=i.end=hn*2);for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){e=Wn(t[n],i,e,lr);if(i[C]){An(t[n],r,i);Bn(r,i,i[Lt]*2);r[y]();r.arc(i.x,i.y,i[Lt],i[Ft]*i[K]-hn/2,i.end*i[K]-hn/2,i.ccw);i[A]&&er(t[n],r,i);_n(t[n],r,i)}}}return t};e.fn[Yt]=function cr(e){var t=this,n,r,i=new xn(e),o=i[h]*4/3,u=i[c];i[yt]=s;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){e=Wn(t[n],i,e,cr);if(i[C]){An(t[n],r,i);Bn(r,i,i[h],i[c]);r[y]();r[Kt](i.x,i.y-u/2);r[pt](i.x-o/2,i.y-u/2,i.x-o/2,i.y+u/2,i.x,i.y+u/2);r[pt](i.x+o/2,i.y+u/2,i.x+o/2,i.y-u/2,i.x,i.y-u/2);i[A]&&er(t[n],r,i);_n(t[n],r,i)}}}return t};e.fn[Gt]=function hr(e){var t=this,n,r,i=new xn(e),o=2*hn/i.sides,u=o/2,a=u+hn/2,l=i[Lt]*dn(u),c,h,p;i.projection&&(i[wt]=-i.projection);for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){e=Wn(t[n],i,e,hr);if(i[C]){An(t[n],r,i);Bn(r,i,i[Lt]*2);r[y]();for(p=0;p<i.sides;p+=1){c=i.x+i[Lt]*dn(a);h=i.y+i[Lt]*pn(a);r[lt](c,h);if(i[wt]){c=i.x+(l+ -l*i[wt])*dn(a+u);h=i.y+(l+ -l*i[wt])*pn(a+u);r[lt](c,h)}a+=o}i[A]&&er(t[n],r,i);i[yt]=s;_n(t[n],r,i)}}}return t};e.fn.drawLine=function pr(e){var t=this,n,r,i=new xn(e),o,u,l;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){e=Wn(t[n],i,e,pr);if(i[C]){An(t[n],r,i);Bn(r,i,0);o=1;r[y]();while(s){u=i["x"+o];l=i["y"+o];if(u===a||l===a)break;r[lt](u+i.x,l+i.y);o+=1}i[A]&&er(t[n],r,i);_n(t[n],r,i)}}}return t};e.fn[Wt]=e.fn.drawQuad=function dr(e){var t=this,n,r,i=new xn(e),o,u,l,c,h;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){e=Wn(t[n],i,e,dr);if(i[C]){An(t[n],r,i);Bn(r,i,0);o=2;r[y]();r[Kt](i.x1+i.x,i.y1+i.y);while(s){u=i["x"+o];l=i["y"+o];c=i["cx"+(o-1)];h=i["cy"+(o-1)];if(u===a||l===a||c===a||h===a)break;r.quadraticCurveTo(c+i.x,h+i.y,u+i.x,l+i.y);o+=1}i[A]&&er(t[n],r,i);_n(t[n],r,i)}}}return t};e.fn[sn]=function vr(e){var t=this,n,r,i=new xn(e),o,u,l,c,h,p,d,v;for(n=0;n<t[f];n+=1){r=Cn(t[n]);if(r){e=Wn(t[n],i,e,vr);if(i[C]){An(t[n],r,i);Bn(r,i,0);o=2;u=1;r[y]();r[Kt](i.x1+i.x,i.y1+i.y);while(s){l=i["x"+o];c=i["y"+o];h=i["cx"+u];p=i["cy"+u];d=i["cx"+(u+1)];v=i["cy"+(u+1)];if(l===a||c===a||h===a||p===a||d===a||v===a)break;r[pt](h+i.x,p+i.y,d+i.x,v+i.y,l+i.x,c+i.y);o+=1;u+=2}i[A]&&er(t[n],r,i);_n(t[n],r,i)}}}return t};e.fn[nn]=function mr(e){var t=this,n,i,o=new xn(e),u,l,c,h,p;for(n=0;n<t[f];n+=1){i=Cn(t[n]);if(i){e=Wn(t[n],o,e,mr);if(o[C]){An(t[n],i,o);Bn(i,o,0);u=1;i[y]();h=o.x;p=o.y;i[Kt](o.x,o.y);while(s){l=o["a"+u];c=o["l"+u];if(l===a||c===a)break;l=l*o[K]-hn/2;h+=c*r.cos(l);p+=c*r.sin(l);i[lt](h,p);u+=1}o[A]&&er(t[n],i,o);_n(t[n],i,o)}}}return t};e.fn.drawText=function gr(t){var n=this,r,i,s,o=new xn(t),a,l,d,m;for(i=0;i<n[f];i+=1){r=e(n[i]);s=Cn(n[i]);if(s){t=Wn(n[i],o,t,gr);if(o[C]){An(n[i],s,o);s.textBaseline=o.baseline;s.textAlign=o.align;tr(s,o);!i&&o[At]!==u?a=rr(s,o):i||(a=String(o.text).split("\n"));if(!i){nr(n[i],s,o,a);d=o.x;o.align==="left"?o.respectAlign?o.x+=o[h]/2:d-=o[h]/2:o.align==="right"&&(o.respectAlign?o.x-=o[h]/2:d+=o[h]/2)}Bn(s,o,o[h],o[c]);for(l=0;l<a[f];l+=1){s[v]=o[v];m=o.y+l*o[c]/a[f]-(a[f]-1)*o[c]/a[f]/2;s.fillText(a[l],d,m);o[g]!==p&&(s[v]=p);s.strokeText(a[l],d,m)}if(o[A]){s[y]();s.rect(o.x-o[h]/2,o.y-o[c]/2,o[h],o[c]);er(n[i],s,o);s[z]()}Mn(s,o)}}}bn=o;return n};e.fn[I]=function yr(e){var t=this,n,r,i;e===a||fn(e)===Ct&&!e[l]?r=new xn(e):r=t[k](e);n=Cn(t[0]);if(n){tr(n,r);i=rr(n,r);yr(t[0],n,r,i)}return r};e.fn[V]=function br(t){function E(e,n){if(e===0){w=m[h]/m[c];v[h]===u&&v[W]===u&&(v[h]=v[W]=m[h]);v[c]===u&&v[_]===u&&(v[c]=v[_]=m[c]);if(t&&v[l]){t[h]=v[h];t[c]=v[c]}An(r[e],n,v);if(v[W]!==u&&v[_]!==u&&v.sx!==u&&v.sy!==u){v[h]===u&&(v[h]=v[W]);v[c]===u&&(v[c]=v[_]);if(!v.cropFromCenter){v.sx+=v[W]/2;v.sy+=v[_]/2}v.sx+v[W]/2>m[h]&&(v.sx=m[h]-v[W]/2);v.sx-v[W]/2<0&&(v.sx=v[W]/2);v.sy-v[_]/2<0&&(v.sy=v[_]/2);v.sy+v[_]/2>m[c]&&(v.sy=m[c]-v[_]/2);Bn(n,v,v[h],v[c]);n[V](m,v.sx-v[W]/2,v.sy-v[_]/2,v[W],v[_],v.x-v[h]/2,v.y-v[c]/2,v[h],v[c])}else{Bn(n,v,v[h],v[c]);n[V](m,v.x-v[h]/2,v.y-v[c]/2,v[h],v[c])}}n[y]();n.rect(v.x-v[h]/2,v.y-v[c]/2,v[h],v[c]);v[A]&&er(r[e],n,v);d=jn(r[e]);n[z]();n.stroke();Mn(n,v);On(n,d,v)}function S(n,r,i){return function(){E(r,i);v[Qt]&&v[Qt][T](n,t);v[l]&&v._next&&e(n)[B]({clear:o,resetFire:s,index:v._next})}}var r=this,i,a,p,d,v=new xn(t),m,g,b,w;b=v.source;g=b[L];if(b.src||g)m=b;else if(b)if(bn.source===b)m=bn._source;else{m=new n;m.src=b;bn.source=b;bn._source=m}for(a=0;a<r[f];a+=1){i=r[a];p=Cn(r[a]);if(p){t=Wn(r[a],v,t,br);if(v[C]&&m)if(m[Zt]||g)S(i,a,p)();else{e(m).bind(Qt,S(i,a,p));m.src=m.src}}}return r};e.fn[rn]=e.fn.pattern=function(r){function d(){f=s[rn](a,o.repeat);o[Qt]&&o[Qt][T](i[0],f)}var i=this,s,o=new xn(r),a,f,l,p;s=Cn(i[0]);if(s){p=o.source;if(ln(p)){a=e(Xt)[0];a[h]=o[h];a[c]=o[c];l=Cn(a);p[T](a,l);d()}else{l=p[L];if(p.src||l)a=p;else{a=new n;a.src=p}if(a[Zt]||l)d();else{e(a).bind(Qt,d);a.src=a.src}}}else f=u;return f};e.fn.createGradient=e.fn.gradient=function(t){var n=this,r,i=new xn(t),s,o=[],l,c,h,p,d,v,m;r=Cn(n[0]);if(r){i.x1=i.x1||0;i.y1=i.y1||0;i.x2=i.x2||0;i.y2=i.y2||0;i.r1!==u||i.r2!==u?s=r.createRadialGradient(i.x1,i.y1,i.r1,i.x2,i.y2,i.r2):s=r.createLinearGradient(i.x1,i.y1,i.x2,i.y2);for(p=1;i["c"+p]!==a;p+=1)i["s"+p]!==a?o.push(i["s"+p]):o.push(u);l=o[f];o[0]===u&&(o[0]=0);o[l-1]===u&&(o[l-1]=1);for(p=0;p<l;p+=1){if(o[p]!==u){v=1;m=0;c=o[p];for(d=p+1;d<l;d+=1){if(o[d]!==u){h=o[d];break}v+=1}c>h&&(o[d]=o[p])}else if(o[p]===u){m+=1;o[p]=c+m*((h-c)/v)}s.addColorStop(o[p],i["c"+(p+1)])}}else s=u;return s};e.fn.setPixels=function wr(e){var t=this,n,r,i,s=new xn(e),o={},a,l,p,d;for(r=0;r<t[f];r+=1){n=t[r];i=Cn(n);if(i){e=Wn(n,s,e,wr);Bn(i,s,s[h],s[c]);if(s[h]===u||s[c]===u){s[h]=n[h];s[c]=n[c];s.x=s[h]/2;s.y=s[c]/2}if(s[h]!==0&&s[c]!==0){a=i.getImageData(s.x-s[h]/2,s.y-s[c]/2,s[h],s[c]);l=a.data;d=l[f];o=[];if(s.each)for(p=0;p<d;p+=4){o.r=l[p];o.g=l[p+1];o.b=l[p+2];o.a=l[p+3];s.each[T](n,o);l[p]=o.r;l[p+1]=o.g;l[p+2]=o.b;l[p+3]=o.a}i.putImageData(a,s.x-s[h]/2,s.y-s[c]/2);i[at]()}}}return t};e.fn.getCanvasImage=function(t,n){var r=this[0];n===a&&(n=1);return r&&r.toDataURL?r.toDataURL("image/"+t,n):u};e.fn.detectPixelRatio=function(n){var r=this,i,o,u,a,l,p,d,v,m,g;for(u=0;u<r[f];u+=1){o=r[u];i=e(r[u]);a=Cn(o);g=jn(r[u]);if(!g.scaled){l=window.devicePixelRatio||1;p=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;d=l/p;if(d!==1){v=o[h];m=o[c];o[h]=v*d;o[c]=m*d;o[dt][h]=v+"px";o[dt][c]=m+"px";a.scale(d,d)}g[Ut]=d;g.scaled=s;n&&n[T](o,d)}}return r};e.support.canvas=e(Xt)[0][L]!==a;Tn.defaults=on;Tn._detectEvents=er;Tn[z]=_n;e[rt]=Tn})(jQuery,document,Image,Math,parseFloat,!0,!1,null);